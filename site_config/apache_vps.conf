# Apache VPS Reverse Proxy Configuration

To access your Dockerized application via a domain or IP (port 80/443), use this Apache configuration.

### 1. Enable Required Apache Modules
```bash
sudo a2enmod proxy
sudo a2enmod proxy_http
sudo systemctl restart apache2
```

### 2. VirtualHost Configuration
Create a new config file: `/etc/apache2/sites-available/gatepass.conf`

```apache
<VirtualHost *:80>
    ServerName smartcampus.kkdes.co.ke
    
    # 1. Global Proxy Settings
    ProxyPreserveHost On
    ProxyAddHeaders On
    
    # 2. Backend API
    ProxyPass /api http://localhost:8000/api
    ProxyPassReverse /api http://localhost:8000/api

    # 3. Static Assets & Media
    ProxyPass /static http://localhost:8000/static
    ProxyPassReverse /static http://localhost:8000/static
    ProxyPass /uploads http://localhost:8000/uploads
    ProxyPassReverse /uploads http://localhost:8000/uploads

    # 4. Frontend
    ProxyPass / http://localhost:8080/
    ProxyPassReverse / http://localhost:8080/

    ErrorLog ${APACHE_LOG_DIR}/gatepass_error.log
    CustomLog ${APACHE_LOG_DIR}/gatepass_access.log combined
</VirtualHost>
```

### 3. Enable Site
```bash
sudo a2ensite gatepass.conf
sudo systemctl reload apache2
```

### 4. Optional: SSL with Certbot
```bash
sudo apt install certbot python3-certbot-apache
sudo certbot --apache -d smartcampus.kkdes.co.ke
```
